<!DOCTYPE html>
<html>
<head>
  <title>Seki - Player demo</title>
  <meta charset="utf-8">
  <meta name="author" content="Adam Reis">
  <link rel="stylesheet" type="text/css" media="screen" href="../src/css/seki.css">
  <link rel="stylesheet" type="text/css" media="screen" href="demo.css">
</head>
<body lang="en">
<div class="main" id="app">
  <div class="left">
    <div id="player">
      <div id="board"></div>
    </div>
  </div>
  <div class="right">
    <h2>Load data</h2>
    <button id="loadBlank">Blank board</button>
    <button id="loadJgf">Load JGF</button>
    <button id="loadSgf">Load SGF</button>
    <button id="loadGib">Load GIB</button>

    <h2>Other</h2>
    <button id="toggleCoordinates">Toggle coordinates</button>
    <button id="toggleSwapColors">Swap colors</button>

    <h2>Switch mode</h2>
    <button id="switchModeNone">None</button>
    <button id="switchModeReplay">Replay</button>
    <button id="switchModePlay">Play</button>
    <button id="switchModeEdit">Edit</button>
    <button id="switchModeSolve">Solve</button>

    <h2>Replay mode tools</h2>
    <button id="startAutoPlay">Start auto play</button>
    <button id="stopAutoPlay">Stop auto play</button>

    <h2>Edit mode tools</h2>
    <button id="switchToolMarkup">Markup</button>
    <button id="switchToolSetup">Setup</button>
  </info>
</div>
<script type="module">
  import Board from '../src/classes/board.js'
  import Player from '../src/classes/player.js'
  import {bindClickHandler} from '../src/helpers/dom.js'
  import {playerModes} from '../src/constants/player.js'

  //Test data
  import {jgf} from './data/jgf.js'
  import {gib} from './data/gib.js'
  import {sgf} from './data/sgf.js'

  //Find player element
  const playerElement = document.getElementById('player')

  //Instantiate player
  const player = new Player()

  //Bootstrap player and load JGF file
  player.bootstrap(playerElement)
  player.load(jgf)

  //Data loading
  bindClickHandler('loadJgf', () => player.load(jgf))
  bindClickHandler('loadSgf', () => player.load(sgf))
  bindClickHandler('loadGib', () => player.load(gib))
  bindClickHandler('loadBlank', () => {
    player.reset()
    player.switchMode(playerModes.PLAY)
  })

  //Coordinates
  bindClickHandler('toggleCoordinates', () => player.board.toggleCoordinates())
  bindClickHandler('toggleSwapColors', () => player.board.toggleSwapColors())

  //Auto play
  bindClickHandler('startAutoPlay', () => player.action('startAutoPlay'))
  bindClickHandler('stopAutoPlay', () => player.action('stopAutoPlay'))

  //Mode switching
  bindClickHandler('switchModeNone', () => player.switchMode(playerModes.NONE))
  bindClickHandler('switchModeReplay', () => player.switchMode(playerModes.REPLAY))
  bindClickHandler('switchModePlay', () => player.switchMode(playerModes.PLAY))
  bindClickHandler('switchModeEdit', () => player.switchMode(playerModes.EDIT))
  bindClickHandler('switchModeSolve', () => player.switchMode(playerModes.SOLVE))
</script>
</body>
</html>
